<?phpsession_start();include("admin.php");$admin = new admin("widgets");include("../loader.php");run_action("admin-dashboard");include_once(dirname(__file__)."/backend_UI.php");?><link rel="stylesheet" href="scripte/css/sites/widget.css" type="text/css"/><div id="contentframe">	<div class="element" id="general_setting" style="float: none;">		<div class="element-heading">			<span><?php echo _t("widgets"); ?></span>		</div>		<div class="element-content">			<?php			if(!(!isset($_GET["widget"]) || !isset($_GET["site"]))){				if($_GET["widget"] == ""){					echo sprintf(_t("no widget selected, %s"), "<a href='".$_SERVER["PHP_SELF"]."'>"._t("Go back")."</a>");				}elseif($_GET["site"] == ""){					echo sprintf(_t("no site selected, %s"), "<a href='".$_SERVER["PHP_SELF"]."'>"._t("Go back")."</a>");				}else{					$old_chdir = getcwd();					chdir(SERVER_DIR);					if (file_exists("widgets/".htmlspecialchars($_GET["widget"])."/backend.php")){						include("widgets/".htmlspecialchars($_GET["widget"])."/backend.php");					}					chdir($old_chdir);				}			}elseif(isset($_GET["widget"]) && !isset($_GET["site"])){				if($_GET["widget"] == ""){					echo _t("no widget selected");				}else{					$widgetsql = new mysql();									$widgetresult = $widgetsql->query("SELECT * FROM `".$widgetsql->dbprae."pagemeta` JOIN `pages` ON `pagemeta`.affected_pageID = `pages`.ID WHERE widget = '".htmlspecialchars($_GET["widget"])."';");					if($widgetsql->result($widgetresult, "num") != 0){					?>					<div class="widget-selector">						<span><?php echo sprintf(_t("select a page for the \"%s\"-widget"), "<b>".htmlspecialchars($_GET["widget"])."</b>"); ?></span>					<ul class="widget-selection site clearfix">										<?php						while($widget = $widgetsql->result($widgetresult, "assoc")){						?>							<li><a href="<?php echo $_SERVER["PHP_SELF"].'?'.$_SERVER['QUERY_STRING']."&site=".$widget["name"]; ?>"><?php echo $widget["visual_name"]; ?></a></li>											<?php						}						?>					</ul>					<span><?php echo _t("or stick this widget to an other site"); ?></span>					</div>					<?php					}else{								?>					<span><?php echo _t("stick this widget to a site in order to use it"); ?></span>					<?php					}				}			}else{				$widgetsql = new mysql();				$widgetresult = $widgetsql->query("SELECT * FROM `".$widgetsql->dbprae."pagemeta` LEFT JOIN `widgets` ON `pagemeta`.widget = `widgets`.name GROUP BY `widget`;");				?>				<span><?php echo _t("choose a widget you like to modify"); ?></span>				<ul class="widget-selection clearfix">				<?php				while($widget = $widgetsql->result($widgetresult, "assoc")){				if(!is_dir("widgets/".$widget["widget"]) || !$widget["description"]) {				$color = array("red", "orange", "blue", "green");				?>				<li class="error widget-selection semi <?php echo ($widget["color"]) ? $widget["color"] : $color[rand(0, count($color) - 1)]; ?>">					<a href="<?php echo $_SERVER["PHP_SELF"]."?widget=".$widget["widget"]; ?>"><?php echo $widget["widget"]; ?></a>				</li>				<?php								}else{				?>				<a class="widget-link" href="<?php echo $_SERVER["PHP_SELF"]."?widget=".$widget["widget"]; ?>">					<li class="widget-selection <?php echo $widget["color"]; ?>">						<div class="widget-logo">							<i class="fa fa-<?php echo $widget["font_logo"];?>"></i>						</div>						<div class="widget-heading"><?php echo $widget["widget"]; ?></div>					</li>				</a>				<?php				}				}				?>				</ul>			<?php				}			?>		</div>	</div></div>footer</div> <!-- #header-fixed-helper --></body>