<?phpclass cache{private $cachefile;public function __construct($filename, $cachetime = 30){	$this->cachefile = "./cache/".$filename.".html";		run_action("before-cache", array("cachefile" => $this->cachefile));		if (file_exists($this->cachefile) && (time() - $cachetime < filemtime($this->cachefile))){		include($this->cachefile);		echo "<!-- Cached ".date('jS F Y H:i', filemtime($this->cachefile))."-->";		exit;	} 	ob_start(); // start the output buffer}public function endcache(){$fp = fopen($this->cachefile, 'w'); fwrite($fp, ob_get_contents());fclose($fp); ob_end_flush();run_action("after-cache", array("cachefile" => $this->cachefile));}public function getcontent(){	return ob_get_contents();}}?>